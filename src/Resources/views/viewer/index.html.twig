{% extends '@LogViewer/base.html.twig' %}

{% block stylesheets %}
    <link href="{{ asset('bundles/logviewer/vendors/DataTables/datatables.min.css') }}" rel="stylesheet">
{% endblock %}
{% block javascripts %}
    <script src="{{ asset('bundles/logviewer/vendors/DataTables/jquery-3.3.1.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/logviewer/vendors/DataTables/datatables.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/logviewer/js/logviewer.js') }}" type="text/javascript"></script>
{% endblock %}

{%- macro dataTablesColumns(columnNames) -%}
    [{%- for name in columnNames -%}
        {"data": "{{ name }}"}{% if not loop.last %},{% endif %}
    {%- endfor -%}]
{%- endmacro -%}

{% block body %}
    <!--Container-->
    <div class="w-full mx-auto pt-20">

        <div class="w-full px-4 md:px-0 md:mt-8 mb-16 text-gray-800 leading-normal">

            <div class="flex flex-wrap">
                <div class="w-full p-3">
                    <!--Log Table-->
                    <div class="bg-white border rounded shadow p-2 text-sm">
                        <table
                                id="logsTable" class="logs-table table-auto w-full"
                                data-remote-url="{{ path('kira_log_viewer.viewer.ajax') }}"
                                data-columns='{{ _self.dataTablesColumns(groupKeys) }}'
                        >
                            <thead>
                                <tr>
                                    {% for key in groupKeys %}
                                    <th>{{ key|capitalize }}</th>
                                    {% endfor %}
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                    <!--/Log Table-->
                </div>
            </div>

        </div>

    </div>
    <!--/Container-->
{% endblock %}